<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>EserBite - Login</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function init() {
            if (localStorage["bgroup41"] != null) {
                bgroup41 = JSON.parse(localStorage["bgroup41"]);

            }
            else {
                bgroup41 = null;
            }
        }

        function signin() {
            let id = document.getElementById("id").value;

            let password = document.getElementById("password").value;
            if (id != "" && password != "") {
                if (bgroup41 != undefined) {
                    if (bgroup41.users[id] == undefined) {
                        alert("please register")
                        return;

                    }
                    else if (id == bgroup41.users[id]["id"] && password != bgroup41.users[id]["password"])
                        alert("Wrong password :(")
                    else if (id == bgroup41.users[id]["id"] && password == bgroup41.users[id]["password"]) {
                        /*alert("Welcome " + bgroup41.users[id]["name"] + "!");*/
                        bgroup41.currentUser = id;
                        localStorage["bgroup41"] = JSON.stringify(bgroup41);
                        window.location = "HtmlPage.html";
                    }
                    else {
                        alert("User name or password is incorrect");
                    }
                }
                else {
                    alert("Please register first.")
                }

            }
            else {

                alert("One field or more is empty!")
            }

        }

    </script>
    <link href="signIn.css" rel="stylesheet" />
</head>
<body onload="init()">
    <div id="section">
        <div class="form-box  ">
            <div class="form-value">

                <h2>Login</h2>
                <div class="inputbox">
                    <ion-icon name="people-outline"></ion-icon>
                    <input id="id" type="text" required>

                    <label for="">User ID</label>
                </div>
                <div class="inputbox">

                    <ion-icon name="lock-closed-outline"></ion-icon>
                    <input id="password" type="password" required>
                    <label for="">Password</label>
                </div>
                <button type="submit" onclick="signin()">Sign in</button>
                <div class="register">
                    <p>Don't have an account? <a href="SignUp.html">Register</a></p>
                </div>

            </div>
        </div>
    </div>


    <!--<section>

    </section>-->

    <!-- אייקונים -->
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>


</body>
</html>
